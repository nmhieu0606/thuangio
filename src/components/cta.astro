---
import { Icon } from "astro-icon";
import Slider from "./slider.astro";
const res = await fetch("http://127.0.0.1:1337/api/slider");
const data = await res.json();

---

<section class="hero-section__section bg-slate-300 rounded-lg dark:bg-gray-800">
  <div class="hero-section__text text-xl text-center p-10">
    <div class="main" id="particles-js"></div>
    <h1 class="text-2xl font-bold dark:text-gray-300">TailWind</h1>
    <p></p>
    <div class="mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start">
      <div class="rounded-md shadow">
        <a
          href="#"
          class="flex w-full items-center justify-center rounded-md border border-transparent bg-blue-800 px-8 py-3 text-base font-medium text-white hover:bg-gray-500 dark:bg-gray-500 dark:hover:bg-black"
          >Get started</a
        >
      </div>
      <div class="mt-3 sm:mt-0 sm:ml-3">
        <a
          href="#"
          class="flex w-full items-center justify-center rounded-md border border-transparent bg-blue-800 px-8 py-3 text-base font-medium text-primary-700 hover:bg-gray-500 dark:bg-gray-500 dark:hover:bg-black dark:text-blue-800"
          >Live demo</a
        >
      </div>
    </div>
    <div class="hero-btns__container"></div>
  </div>
  <div class="hero-section__image pl-6 pt-10 pb-10">
    {
      data.data.attributes.slider.map((item) =>
        item.image.map((i,index) => (
          <div class="slideshow-container">
            <div class="mySlides fade">
              <div class="numbertext">{index+1} / 3</div>
              <img src={`http://127.0.0.1:1337${i.image.data.attributes.url}`} style="width:100%" />
              <div class="text">{i.caption}</div>
            </div>
          </div>
        ))
      )
    }

    <br />

    <div style="text-align:center">
      <span class="dot"></span>
      <span class="dot"></span>
      <span class="dot"></span>
    </div>
  </div>
</section>

<style>
  .hero-section__section {
    margin: var(--section-margin) auto;
    min-height: clamp(90vh, 100vw, calc(100vh - var(--navbar-height)));
    display: grid;
    grid-template-columns: 1fr 1fr;
    align-items: center;
    gap: 1rem;
  }
  .hero-section__text {
    justify-self: center;
    max-width: 25rem;
  }
  .hero-btns__container {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  .hero-btns__container {
    margin-right: 1rem;
  }
  .hero-section__image {
    display: flex;
  }
  .hero-section__image img {
    width: 100%;
    height: 100%;
    max-height: 80vh;
    object-fit: cover;
    border-radius: var(--theme-shape-radius);
  }
  @media (max-width: 768px) {
    .hero-section__section {
      grid-template-columns: 1fr;
    }
  }
  #particles-js {
    height: 150%;
    width: 103%;
  }
  .main {
    padding: 40px;
    transition: 0.5s;
    border-radius: 50%;
    /* border: 1px solid ; */
    box-shadow: 15px 20px 20px rgba(0, 0, 0, 0.07),
      15px 25px 10px rgba(0, 0, 0, 0.05),
      inset 10px 10px 10px rgba(0, 0, 0, 0.08),
      inset -10px -10px 15px rgba(255, 255, 255, 0.651);
  }
  .main:hover {
    border-radius: 100% 100% 65% 68% / 0% 0% 0% 0%;
  }
</style>
<style>
  * {
    box-sizing: border-box;
  }

  .mySlides {
    display: none;
  }
  img {
    vertical-align: middle;
  }
  .dot {
    visibility: hidden;
  }
  /* Slideshow container */
  .slideshow-container {
    max-width: 1000px;
    position: relative;
    margin: auto;
  }

  /* Caption text */
  .text {
    color: #f2f2f2;
    font-size: 15px;
    padding: 8px 12px;
    position: absolute;
    bottom: 8px;
    width: 100%;
    text-align: center;
  }

  /* Number text (1/3 etc) */
  .numbertext {
    color: #f2f2f2;
    font-size: 12px;
    padding: 8px 12px;
    position: absolute;
    top: 0;
  }

  /* The dots/bullets/indicators */
  .dot {
    height: 15px;
    width: 15px;
    margin: 0 2px;
    background-color: black;
    border-radius: 50%;
    display: inline-block;
    transition: background-color 0.6s ease;
  }

  .active {
    background-color: #717171;
  }

  /* Fading animation */
  .fade {
    animation-name: fade;
    animation-duration: 1.5s;
  }
  img {
    border-radius: 10px;
  }

  @keyframes fade {
    from {
      opacity: 0.3;
    }
    to {
      opacity: 1;
    }
  }

  /* On smaller screens, decrease text size */
  @media only screen and (max-width: 300px) {
    .text {
      font-size: 11px;
    }
  }
</style>
<script>
  let slideIndex = 0;
  showSlides();
  function showSlides() {
    let i;
    let slides = document.getElementsByClassName("mySlides");
    let dots = document.getElementsByClassName("dot");
    for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
    }
    slideIndex++;
    if (slideIndex > slides.length) {
      slideIndex = 1;
    }
    for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" active", "");
    }
    slides[slideIndex - 1].style.display = "block";
    dots[slideIndex - 1].className += " active";
    setTimeout(showSlides, 4000); // Change image every 2 seconds
  }
</script>
